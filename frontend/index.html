<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Online Bug Tracker System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Professional Smooth UI CSS -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- PAGE LOADER -->
  <div id="pageLoader" class="page-loader">
    <div class="loader-inner">
      <div class="loader-logo">BugTrack</div>
      <div class="loader-spinner" aria-hidden="true">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </div>
      <div class="loader-text">Loading bug tracker‚Ä¶</div>
    </div>
  </div>

  <!-- ====================== HEADER ====================== -->
  <header class="site-header">
    <div class="brand">
      <h1>BugTrack</h1>
      <small class="tag">Online Bug Management System</small>
    </div>

    <!-- Top navigation -->
    <nav class="top-nav" role="navigation" aria-label="Main navigation">
      <ul class="nav">
        <li><a href="#" onclick="openProjects();return false;">Projects</a></li>
        <li><a href="#" onclick="openBugs();return false;">Bugs</a></li>
        <li><a href="#" onclick="openReports();return false;">Reports</a></li>
        <li><a href="#" onclick="openSolutions();return false;">Solutions</a></li>
      </ul>

      <!-- Mobile hamburger menu trigger (visible on small screens) -->
      <button id="navToggle" class="nav-menu" aria-expanded="false" aria-label="Open menu">‚ò∞</button>

      <!-- Mobile navigation panel (hidden by default) -->
      <div id="mobileNav" class="mobile-nav hidden" aria-hidden="true">
        <div class="mobile-nav-header">
          <div class="brand"><strong>BugTrack</strong></div>
          <button id="mobileNavClose" class="close-mobile" aria-label="Close menu">‚úï</button>
        </div>
        <ul class="mobile-nav-list">
          <li><a href="#" onclick="openProjects();return false;">üìÅ Projects</a></li>
          <li><a href="#" onclick="openBugs();return false;">üêõ Bugs</a></li>
          <li><a href="#" onclick="openReports();return false;">üìà Reports</a></li>
          <li><a href="#" onclick="openSolutions();return false;">üîß Solutions</a></li>
        </ul>
      </div>

      <div class="user-info" aria-live="polite">
        <span id="userName" class="user-name"></span>
        <button id="logoutBtn" class="btn ghost hidden">Logout</button>
      </div>
    </nav>
  </header>

  <main class="container">

    <!-- ====================== AUTH ====================== -->
    <section id="authBox" class="auth-container" aria-labelledby="authHeading">
      <div class="auth-grid card">
        <div class="auth-card auth-login" id="loginCard">
          <div class="auth-brand">
            <h2>BugTrack</h2>
            <p class="muted">Sign in to manage and resolve bugs</p>
          </div>
          <div class="form">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" placeholder="you@company.com" required />

            <label for="loginPassword">Password</label>
            <input id="loginPassword" type="password" placeholder="Password" required />

            <div class="auth-actions">
              <button id="loginBtn" type="button" class="btn primary">Sign In</button>
            </div>

            <p class="muted small">Don't have an account? <a href="#" id="showRegister">Create one</a></p>
            <p id="authMessage" class="error" role="status"></p>
          </div>
        </div>

        <div class="auth-card auth-register hidden" id="registerCard">
          <div class="auth-brand">
            <h2>Create Account</h2>
            <p class="muted">Register to start reporting and resolving bugs</p>
          </div>
          <div class="form">
            <label for="regName">Full name</label>
            <input id="regName" type="text" placeholder="Your full name" />

            <label for="regEmail">Email</label>
            <input id="regEmail" type="email" placeholder="you@company.com" />

            <label for="regPassword">Password</label>
            <input id="regPassword" type="password" placeholder="Choose a secure password" />

            <div class="auth-actions">
              <button id="registerBtn" type="button" class="btn">Create Account</button>
              <button id="backToLogin" type="button" class="btn ghost">Back to Sign In</button>
            </div>
            <p class="muted small">By registering you agree to this demo's terms.</p>
          </div>
        </div>
      </div>
    </section>


    <!-- ====================== MAIN UI ====================== -->
    <section id="appUI" class="hidden">

      <!-- Top Bar Navigation -->
      <div class="top-bar">

        <div class="search-wrap">
          <input id="searchInput" placeholder="Search bugs or projects" aria-label="Search" />
          <button id="searchBtn" class="btn small" aria-label="Search bugs">Search</button>
        </div>

          <div class="actions">
          <button id="refreshBtn" class="btn ghost">Refresh</button>
          <button id="newProjectBtn" class="btn small action-card">+ New Project</button>
          <button id="newBugBtn" class="btn primary small">+ Report Bug</button>

          <button id="notifBadge" class="badge hidden" aria-label="Notifications" aria-haspopup="true" aria-expanded="false">
            <span class="icon">üîî</span>
            <span class="count">0</span>
          </button>
        </div>

      </div>

      <!-- TWO-COLUMN GRID -->
      <div class="grid">

        <!-- LEFT COLUMN -->
        <div class="col">

          <!-- PROJECTS -->
          <div class="card">
            <div class="card-header">
              <h3>Projects</h3>
              <button id="sidebarNewProject" class="btn tiny">+ New</button>
            </div>
            <ul id="projectsList" class="list"></ul>
          </div>

          <!-- USERS -->
          <div class="card">
            <h3>Users</h3>
            <ul id="usersList" class="list"></ul>
          </div>

        </div>


        <!-- RIGHT COLUMN -->
        <div class="col">

          <!-- BUG TABLE -->
          <div class="card">
            <div class="card-header" style="position:relative;">
              <h3>Bugs</h3>
              <div class="card-actions" style="display:flex;align-items:center;gap:8px;">
                <button id="filterOpen" class="btn tiny ghost">Open</button>
                <button id="filterAll" class="btn tiny ghost">All</button>

                <div style="position:relative;">
                  <button id="filterBtn" class="btn tiny" aria-haspopup="true" aria-expanded="false" aria-controls="filterDropdown">Filter ‚ñæ</button>

                  <div id="filterDropdown" class="filter-dropdown hidden" role="menu" aria-hidden="true">
                    <div class="filter-row">
                      <label for="filterStatus">Status</label>
                      <select id="filterStatus"><option value="all">All</option><option value="open">Open</option><option value="closed">Closed</option></select>
                    </div>
                    <div class="filter-row">
                      <label for="filterPriority">Priority</label>
                      <select id="filterPriority"><option value="all">Any</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option></select>
                    </div>
                    <div class="filter-row">
                      <label for="filterAssignee">Assignee</label>
                      <select id="filterAssignee"><option value="">(any)</option></select>
                    </div>
                    <div class="filter-row">
                      <label for="filterProject">Project</label>
                      <select id="filterProject"><option value="">(any)</option></select>
                    </div>
                    <div class="filter-actions">
                      <button id="applyFilter" class="btn primary">Apply</button>
                      <button id="clearFilter" class="btn ghost">Clear</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="table-wrap">
              <table class="table" aria-live="polite">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Priority</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="bugsTable"></tbody>
              </table>
            </div>

          </div>

          <!-- REPORTS -->
          <div class="card">
            <div class="card-header">
              <h3>Reports & Analytics</h3>
                <div class="card-actions">
                <button id="newReportBtn" class="btn tiny action-card">+ New Report</button>
              </div>
            </div>
            <div id="reportBox"></div>
            <div id="reportsList" class="reports-list" style="margin-top:12px"></div>
          </div>

          <!-- SOLUTIONS (Antivirus-like helper) -->
          <div class="card" id="solutionsSection">
            <div class="card-header">
              <h3>Solutions & Automated Scan</h3>
              <div class="card-actions">
                <button id="refreshSolutions" class="btn tiny ghost">Refresh</button>
              </div>
            </div>
            <div id="solutionsList" class="solutions-list"></div>
            <p class="muted" style="margin-top:10px;font-size:13px">Note: "Run Antivirus" is a simulated scan that will attempt to mark a bug as resolved in this demo environment. It does not perform real malware scanning.</p>
          </div>

          <!-- REAL-TIME SOLVER ANALYSIS -->
          <div class="card" id="analysisSection">
            <div class="card-header">
              <h3>Real-time Solver Analysis</h3>
              <div class="card-actions">
                <button id="analysisRefresh" class="btn tiny ghost">Refresh</button>
              </div>
            </div>
            <div class="analysis-body">
              <div class="analysis-stats">
                <div class="stat"><div class="stat-value" id="statTotalSolved">0</div><div class="stat-label">Total Resolved</div></div>
                <div class="stat"><div class="stat-value" id="statAvgTime">0s</div><div class="stat-label">Avg Resolution</div></div>
                <div class="stat"><div class="stat-value" id="statActive">0</div><div class="stat-label">Active Solvers</div></div>
              </div>
              <div class="chart-wrap">
                <svg id="analysisChart" viewBox="0 0 600 180" preserveAspectRatio="none"></svg>
              </div>
              <div class="solver-list" id="solverList"></div>
            </div>
          </div>

        </div>

      </div>

    </section>

  </main>


  <!-- ====================== MODAL ====================== -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content" role="document">
      <button id="modalClose" class="close" aria-label="Close">‚úï</button>
      <div id="modalBody"></div>
    </div>
  </div>

  
  <!-- Socket.IO + App Script -->
  <script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
  <script src="app.js"></script>


  <!-- THEME TOGGLE -->
<button id="themeToggle" class="theme-toggle">
  <span class="icon sun">‚òÄÔ∏è</span>
  <span class="icon moon">üåô</span>
</button>

<!-- SIDEBAR -->
<aside id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h2>Menu</h2>
    <button id="closeSidebar" class="close-sidebar">‚úï</button>
  </div>
  <ul class="sidebar-list">
    <li onclick="openDashboard()">üìä Dashboard</li>
    <li onclick="openProjects()">üìÅ Projects</li>
    <li onclick="openBugs()">üêõ Bugs</li>
    <li onclick="openReports()">üìà Reports</li>
  </ul>
</aside>

<!-- SIDEBAR TRIGGER -->
<!-- sidebar trigger removed per request -->


<!-- NOTIFICATION PANEL -->
<div id="notifPanel" class="notif-panel">
  <div class="notif-header">
    <h3>Notifications</h3>
    <button id="closeNotif" class="close-notif">‚úï</button>
  </div>
  <div id="notifContent" class="notif-content"></div>
</div>

</body>
</html>
